"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var frameModule = require("ui/frame");
var helpers = require("./scripts/helpers");
var lock = null;
exports.onPageLoaded = function (args) {
    lock = helpers.getAuthLock();
    console.dump(lock.credientials);
    var page = args.object;
    console.log("Login page");
    if (!lock.hasValidToken()) {
        doLogin();
    }
    else {
        goToHome();
    }
};
function doLogin() {
    lock.show().then(function (res) {
        console.log("Hey login worked");
        goToHome();
    }, function (error) {
        console.log(error);
    });
}
function goToHome() {
    console.log("Lets navigate to home");
    var navOptions = {
        moduleName: "home",
        transition: {
            name: "fade",
            duration: 380,
            curve: "easeIn"
        },
        clearHistory: true
    };
    console.log("Frame count: " + frameModule.stack().length);
    frameModule.topmost().navigate(navOptions);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsb2dpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHNDQUF3QztBQUN4QywyQ0FBNkM7QUFHN0MsSUFBSSxJQUFJLEdBQWMsSUFBSSxDQUFDO0FBRTNCLE9BQU8sQ0FBQyxZQUFZLEdBQUcsVUFBVSxJQUFJO0lBQ2pDLElBQUksR0FBRyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDN0IsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDaEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRzFCLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUEsQ0FBQztRQUV0QixPQUFPLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUVOLFFBQVEsRUFBRSxDQUFDO0lBQ2IsQ0FBQztBQUNMLENBQUMsQ0FBQTtBQUdEO0lBQ0ksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFDLEdBQUc7UUFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hDLFFBQVEsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxFQUFFLFVBQVUsS0FBSztRQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBRUQ7SUFDSSxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7SUFFckMsSUFBSSxVQUFVLEdBQUc7UUFDYixVQUFVLEVBQUUsTUFBTTtRQUNsQixVQUFVLEVBQUU7WUFDUixJQUFJLEVBQUUsTUFBTTtZQUNaLFFBQVEsRUFBRSxHQUFHO1lBQ2IsS0FBSyxFQUFFLFFBQVE7U0FDbEI7UUFDRCxZQUFZLEVBQUUsSUFBSTtLQUNyQixDQUFDO0lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEdBQUcsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFELFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFwcFNldHRpbmdzIGZyb20gXCJhcHBsaWNhdGlvbi1zZXR0aW5nc1wiO1xuaW1wb3J0ICogYXMgZnJhbWVNb2R1bGUgZnJvbSBcInVpL2ZyYW1lXCI7XG5pbXBvcnQgKiBhcyBoZWxwZXJzIGZyb20gXCIuL3NjcmlwdHMvaGVscGVyc1wiO1xuaW1wb3J0IHsgQXV0aDBMb2NrIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hdXRoMFwiO1xuXG5sZXQgbG9jazogQXV0aDBMb2NrID0gbnVsbDtcblxuZXhwb3J0cy5vblBhZ2VMb2FkZWQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIGxvY2sgPSBoZWxwZXJzLmdldEF1dGhMb2NrKCk7XG4gICAgY29uc29sZS5kdW1wKGxvY2suY3JlZGllbnRpYWxzKTtcbiAgICB2YXIgcGFnZSA9IGFyZ3Mub2JqZWN0O1xuICAgIGNvbnNvbGUubG9nKFwiTG9naW4gcGFnZVwiKTtcblxuICAgIC8vQ2hlY2sgdG8gc2VlIGlmIHRoZSB1c2VyIGlzIGxvZ2dlZCBpblxuICAgIGlmKCFsb2NrLmhhc1ZhbGlkVG9rZW4oKSl7XG4gICAgICAvL05vIHRva2VucyAtPiBsb2dpblxuICAgICAgICBkb0xvZ2luKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vVG9rZW5zIGF2YWlsYWJsZS4gQ2hlY2sgZXhwaXJ5IGFuZCBpZiBPSyBzaG93ICdob21lJ1xuICAgICAgZ29Ub0hvbWUoKTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gZG9Mb2dpbigpe1xuICAgIGxvY2suc2hvdygpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkhleSBsb2dpbiB3b3JrZWRcIik7XG4gICAgICAgIGdvVG9Ib21lKCk7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ29Ub0hvbWUoKXtcbiAgICBjb25zb2xlLmxvZyhcIkxldHMgbmF2aWdhdGUgdG8gaG9tZVwiKTtcblxuICAgIHZhciBuYXZPcHRpb25zID0ge1xuICAgICAgICBtb2R1bGVOYW1lOiBcImhvbWVcIixcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogXCJmYWRlXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMzgwLFxuICAgICAgICAgICAgY3VydmU6IFwiZWFzZUluXCJcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJIaXN0b3J5OiB0cnVlIC8vRG9udCB3YW50IHRoZSB1c2VyIHRvIG5hdiBiYWNrIHRvIGxvZ2luXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZyhcIkZyYW1lIGNvdW50OiBcIiArIGZyYW1lTW9kdWxlLnN0YWNrKCkubGVuZ3RoKTtcbiAgICBmcmFtZU1vZHVsZS50b3Btb3N0KCkubmF2aWdhdGUobmF2T3B0aW9ucyk7XG5cbn1cbiJdfQ==